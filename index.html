<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Survey Manipulation Explorer</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #0f172a;
        }
        
        #root {
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* Fix for Safari text scaling */
        html { -webkit-text-size-adjust: 100%; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function ManipulationSurvey() {
          const [phase, setPhase] = useState('intro');
          const [responses, setResponses] = useState({});
          const [currentQuestion, setCurrentQuestion] = useState(0);

          const survey1Questions = [
            {
              id: 'q1_leading',
              question: "Don't you agree that most people waste too much time on social media?",
              type: 'scale',
              options: ['Strongly Disagree', 'Disagree', 'Neutral', 'Agree', 'Strongly Agree'],
              manipulation: 'Acquiescence Bias',
              explanation: 'People are substantially more likely to agree with statements made in a question than disagree.'
            },
            {
              id: 'q2_loaded',
              question: "How much do you support reckless spending on unnecessary government programs?",
              type: 'scale',
              options: ['Not at all', 'A little', 'Somewhat', 'Very much', 'Extremely'],
              manipulation: 'Word Choice',
              explanation: '"Reckless" and "unnecessary" are emotionally charged words that bias the response.'
            },
            {
              id: 'q3_anchoring',
              question: "Replacing Canada's crumbling water and road infrastructure is estimated to cost $356.7 billion. How worried are you about the state of your municipal water system?",
              type: 'scale',
              options: ['Not worried', 'Slightly worried', 'Worried', 'Very worried', 'Extremely worried'],
              manipulation: 'Availability and Context',
              explanation: 'Presenting alarming context and large numbers before the question influences how worried you feel about your own water system, especially if you do not have a pre-existing opinion about the topic.'
            },
            {
              id: 'q4_double',
              question: "Do you want to be rich and famous?",
              type: 'yesno',
              manipulation: 'Double-Barrelled',
              explanation: 'This is asking two different questions at the same time; some people may wish to be one, but not the other.'
            },
            {
              id: 'q5_framing_negative',
              question: "Would you support a policy that could result in 400 job losses?",
              type: 'yesno',
              manipulation: 'Negative Framing',
              explanation: 'Frames a potentially complex policy negatively. We will show you the positive version later.'
            }
          ];

          const survey2Questions = [
            {
              id: 'q1_neutral',
              question: "Are you concerned about the amount of time people spend on social media?",
              type: 'scale',
              options: ['Not concerned', 'Slightly concerned', 'Concerned', 'Very concerned'],
              compareWith: 'q1_leading',
 	      manipulation: 'Removing Aquiescence',
	      explanation: 'By removing the leading question and the agree or disagree answer, it should be possible to get a more accurate answer. Though the generic use of people rather than something more specific is not ideal.'
            },
            {
              id: 'q2_neutral',
              question: "How much do you support government social programs such as education and health care?",
              type: 'scale',
              options: ['Not at all', 'A little', 'Somewhat', 'Very much', 'Extremely'],
              compareWith: 'q2_loaded',
 	      manipulation: 'Neutral Language',
	      explanation: 'Leaving out value judgements and describing some common examples of spending allows people to consider specific and non-emotional responses.'
            },
            {
              id: 'q3_neutral',
              question: "Are you satisfied with your current water and sewage service from your local town or city?",
              type: 'scale',
              options: ['Very dissatisfied', 'Dissatisfied', 'Neutral', 'Satisfied', 'Very satisfied'],
              compareWith: 'q3_anchoring',
 	      manipulation: 'Specific and Available',
	      explanation: 'The question does not include any alarming context and asks people something about which they should have direct knowledge.'
            },
            {
              id: 'q4_neutral',
              question: "Would you rather be rich or famous?",
              type: 'choice',
              options: ['Rich', 'Famous', 'Both'],
              compareWith: 'q4_double',
	      manipulation: 'Better Choices',
	      explanation: 'By using or, the question is singular, and by including the answer -both- the question allows a choice of three distinct answers.'
            },
            {
              id: 'q5_framing_positive',
              question: "A factory is closing down, risking 1000 jobs. It is possible to approve a sale to a new buyer, but they would only be able to keep 600 employees. Would you support this?",
              type: 'yesno',
              compareWith: 'q5_framing_negative',
              manipulation: 'Informative Framing',
              explanation: 'Saving 600 of 1000 threatened jobs sounds much less negative an outcome than losing 400, even though they refer to the same scenario.'
            }
          ];

          const handleResponse = (questionId, value) => {
            setResponses(prev => ({ ...prev, [questionId]: value }));
          };

          const advanceQuestion = () => {
            if (phase === 'survey1' && currentQuestion < survey1Questions.length - 1) {
              setCurrentQuestion(currentQuestion + 1);
            } else if (phase === 'survey1') {
              setPhase('reveal');
              setCurrentQuestion(0);
            } else if (phase === 'survey2' && currentQuestion < survey2Questions.length - 1) {
              setCurrentQuestion(currentQuestion + 1);
            } else if (phase === 'survey2') {
              setPhase('results');
            }
          };

          const renderIntro = () => (
            <div className="space-y-8">
              <div className="text-center space-y-4">
                <h1 className="text-5xl font-bold bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 bg-clip-text text-transparent">
                  Are You Being Manipulated?
                </h1>
                <p className="text-2xl text-slate-300 font-light">
                  An Interactive Exploration of Survey Manipulation
                </p>
              </div>
              <div className="bg-slate-800/50 border border-amber-500/30 rounded-2xl p-8 space-y-4 relative z-0">
                <h2 className="text-2xl font-semibold text-amber-400">What This Survey Does</h2>
                <p className="text-lg text-slate-300 leading-relaxed">
                  You're about to experience firsthand how surveys can manipulate your responses through subtle techniques. 
                  First, you'll answer questions that use common manipulation tactics. Then, we'll reveal what we did 
                  and show you how your answers might have been different.
                </p>
                <p className="text-lg text-slate-300 leading-relaxed">
                  This should take about 5 minutes. Your responses are private and only shown to you.
                </p>
              </div>
              <button
                onClick={() => setPhase('survey1')}
                className="w-full bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold text-xl py-6 rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all transform hover:scale-105 flex items-center justify-center gap-3 relative z-0 overflow-hidden shadow-xl"
                style={{ isolation: 'isolate' }}
              >
                Begin Survey ‚Üí
              </button>
            </div>
          );

          const renderQuestion = (question, showManipulation = false) => {
            const currentValue = responses[question.id];
            return (
              <div className="space-y-6">
                {showManipulation && (
                  <div className="bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex items-start gap-3 relative z-0">
                    <div className="text-red-400 flex-shrink-0 mt-1 text-2xl">‚ö†Ô∏è</div>
                    <div>
                      <p className="font-bold text-red-400 text-lg">Less manipulative: {question.manipulation}</p>
                      <p className="text-slate-300 mt-1">{question.explanation}</p>
                    </div>
                  </div>
                )}
                <div className="bg-slate-800/50 border border-slate-700 rounded-2xl p-8 space-y-6 relative z-0">
                  <h3 className="text-2xl font-semibold text-white break-words">{question.question}</h3>
                  {(question.type === 'scale' || question.type === 'choice') && (
                    <div className="space-y-3">
                      {question.options.map((option, idx) => (
                        <button
                          key={idx}
                          onClick={() => handleResponse(question.id, option)}
                          className={`w-full text-left px-6 py-4 rounded-xl border-2 transition-all ${
                            currentValue === option
                              ? 'border-amber-500 bg-amber-500/20 text-white'
                              : 'border-slate-600 bg-slate-800/30 text-slate-300 hover:border-slate-500'
                          }`}
                        >
                          {option}
                        </button>
                      ))}
                    </div>
                  )}
                  {question.type === 'yesno' && (
                    <div className="flex gap-4">
                      {['Yes', 'No'].map(opt => (
                        <button
                          key={opt}
                          onClick={() => handleResponse(question.id, opt)}
                          className={`flex-1 px-6 py-4 rounded-xl border-2 transition-all ${
                            currentValue === opt
                              ? 'border-amber-500 bg-amber-500/20 text-white'
                              : 'border-slate-600 bg-slate-800/30 text-slate-300 hover:border-slate-500'
                          }`}
                        >
                          {opt}
                        </button>
                      ))}
                    </div>
                  )}
                </div>
                <button
                  onClick={advanceQuestion}
                  disabled={!currentValue}
                  className="w-full bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold text-lg py-4 rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 relative z-0 overflow-hidden"
                  style={{ isolation: 'isolate' }}
                >
                  Continue ‚Üí
                </button>
                <div className="text-center text-slate-400">
                  Question {currentQuestion + 1} of {phase === 'survey1' ? survey1Questions.length : survey2Questions.length}
                </div>
              </div>
            );
          };

          const renderReveal = () => (
            <div className="space-y-8">
              <div className="text-center space-y-4">
                <div className="text-6xl">üëÅÔ∏è</div>
                <h2 className="text-4xl font-bold text-white">Let's Pause and Reflect</h2>
                <p className="text-xl text-slate-300">Did you notice anything unusual about those questions?</p>
              </div>
              <div className="space-y-6">
                {survey1Questions.map((q, idx) => (
                  <div key={idx} className="bg-slate-800/50 border border-red-500/30 rounded-2xl p-6 space-y-3 relative z-0">
                    <div className="flex items-start gap-3">
                      <div className="bg-red-500/20 rounded-lg p-2 flex-shrink-0 text-2xl">‚ö†Ô∏è</div>
                      <div className="flex-1">
                        <p className="font-bold text-red-400 text-lg mb-2">{q.manipulation}</p>
                        <p className="text-slate-300 mb-3 break-words">{q.question}</p>
                        <p className="text-slate-400 text-sm italic">{q.explanation}</p>
                        {responses[q.id] && (
                          <div className="mt-3 pt-3 border-t border-slate-700">
                            <p className="text-amber-400 font-semibold">Your answer: {responses[q.id]}</p>
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

	<div className="bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/30 rounded-2xl p-8 space-y-4">
                <h3 className="text-2xl font-semibold text-amber-400">What Happens Next</h3>
                <p className="text-lg text-slate-300 leading-relaxed">
                  Now we'll ask you similar questions again, but this time without the manipulation. 
                  Pay attention to whether your answers change when the questions are framed more neutrally.
                </p>
              </div>

              <button
                onClick={() => { setPhase('survey2'); setCurrentQuestion(0); }}
                className="w-full bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold text-xl py-6 rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all flex items-center justify-center gap-3 relative z-0 overflow-hidden"
                style={{ isolation: 'isolate' }}
              >
                Continue to Part 2 ‚Üí
              </button>
            </div>
          );

          const renderResults = () => {
            const comparisons = [
              { m: 'q1_leading', n: 'q1_neutral', l: 'Social Media Question' },
              { m: 'q2_loaded', n: 'q2_neutral', l: 'Government Programs Question' },
              { m: 'q3_anchoring', n: 'q3_neutral', l: 'Water Infrastructure Question' },
              { m: 'q4_double', n: 'q4_neutral', l: 'Rich and Famous Question' },
              { m: 'q5_framing_negative', n: 'q5_framing_positive', l: 'Job Policy Question' }
            ];
            return (
              <div className="space-y-8">
                <div className="text-center space-y-4">
                  <div className="text-6xl">üìä</div>
                  <h2 className="text-4xl font-bold text-white">Your Results: Before & After</h2>
                </div>
                <div className="space-y-6">
                  {comparisons.map((comp, idx) => {
                    const mAns = responses[comp.m];
                    const nAns = responses[comp.n];
                    return (
                      <div key={idx} className="bg-slate-800/50 border border-slate-700 rounded-2xl p-6 space-y-4 relative z-0">
                        <h3 className="text-xl font-semibold text-white">{comp.l}</h3>
                        <div className="grid md:grid-cols-2 gap-4">
                          <div className="bg-red-500/10 border border-red-500/30 rounded-xl p-4 flex flex-col justify-between">
                            <div>
                                <p className="text-red-400 font-bold mb-2">Manipulated Version</p>
                                <p className="text-slate-300 text-sm mb-4 break-words leading-relaxed italic">"{survey1Questions.find(q => q.id === comp.m)?.question}"</p>
                            </div>
                            <p className="text-amber-400 font-semibold">Your answer: {mAns || 'No response'}</p>
                          </div>
                          <div className="bg-green-500/10 border border-green-500/30 rounded-xl p-4 flex flex-col justify-between">
                            <div>
                                <p className="text-green-400 font-bold mb-2">Neutral Version</p>
                                <p className="text-slate-300 text-sm mb-4 break-words leading-relaxed italic">"{survey2Questions.find(q => q.id === comp.n)?.question}"</p>
                            </div>
                            <p className="text-amber-400 font-semibold">Your answer: {nAns || 'No response'}</p>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>

<div className="bg-gradient-to-r from-slate-800 to-slate-900 border border-amber-500/30 rounded-2xl p-8 space-y-6">
                  <h3 className="text-2xl font-bold text-amber-400">Key Takeaways</h3>
                  
                  <div className="space-y-4 text-slate-300">
                    <div className="flex gap-3">
                      <div className="text-amber-500 font-bold">1.</div>
                      <p><strong className="text-white">Acquiescence Bias</strong>: People are substantially more likely to agree with statements made in a question than disagree.</p>
                    </div>
                    <div className="flex gap-3">
                      <div className="text-amber-500 font-bold">2.</div>
                      <p><strong className="text-white">Word Choice</strong>: Using emotional or biased words can push you toward a conclusion.</p>
                    </div>
                    <div className="flex gap-3">
                      <div className="text-amber-500 font-bold">3.</div>
                      <p><strong className="text-white">Availability and Context</strong>: Presenting alarming information or large numbers before a question influences how you respond.</p>
                    </div>
                    <div className="flex gap-3">
                      <div className="text-amber-500 font-bold">4.</div>
                      <p><strong className="text-white">Double-Barrelled Questions</strong>: Asking two questions at once makes it impossible to give a clear answer to either one.</p>
                    </div>
                    <div className="flex gap-3">
                      <div className="text-amber-500 font-bold">5.</div>
                      <p><strong className="text-white">Framing Effects</strong>: The same information presented positively or negatively can dramatically influence decisions.</p>
                    </div>
                  </div>

                  <div className="pt-4 border-t border-slate-700">
                    <p className="text-lg text-slate-200 font-semibold">
                      We don't recommend that anyone design survey questions to manipulate the test-takers. Ideally, we want survey questions to elicit useful, actionable answers. But people often inadvertently introduce error into their surveys through their use of language, framing, context, question order and more. Check out our new course, <a href="test">Asking Survey Questions</a>, for tools and techniques to build your surveys better. 
                    </p>
                  </div>
                </div>

                <button
                  onClick={() => { setPhase('intro'); setResponses({}); setCurrentQuestion(0); }}
                  className="w-full bg-gradient-to-r from-slate-600 to-slate-700 text-white font-bold text-lg py-4 rounded-xl hover:from-slate-700 hover:to-slate-800 transition-all relative z-0 overflow-hidden"
                  style={{ isolation: 'isolate' }}
                >
                  Start Over
                </button>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 overflow-x-hidden">
              <div className="max-w-4xl mx-auto py-12">
                {phase === 'intro' && renderIntro()}
                {phase === 'survey1' && renderQuestion(survey1Questions[currentQuestion])}
                {phase === 'reveal' && renderReveal()}
                {phase === 'survey2' && renderQuestion(survey2Questions[currentQuestion], true)}
                {phase === 'results' && renderResults()}
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ManipulationSurvey />);
    </script>
</body>
</html>